        {% if type == "thead" %}
        <tr id="thead_compte" class="text-nowrap">
            <th>Nom</th>
            <th>Adresse</th>
            <th>Action</th>
        </tr>
        {% elseif type == "tbody" %}
        
        <tr id="tbody_compte" class="text-nowrap">
            
            <td> 
                <a {% if genre == 1 %} href="#affaires_client" onclick="return listAffaireByCompte({{liste.id}}, {{liste.genre}})" {% elseif genre == 2 %} href="#affaires_fournisseur"  onclick="return listProduitByCompte({{liste.id}})" {% endif %}>
                    {{ liste.nom }}
                </a> 
            </td>
            <td> {{liste.adresse|slice(0,50)|raw}} </td>
            
            <td>
                <a href="#" onclick="return openModalUpdatecompte({{liste.id}}, {{liste.genre}})" class="mx-1"><i class="bi bi-pencil-fill"></i></a>
                <a href="#" onclick="return deleteCompte({{liste.id}}, {{liste.genre}})" class="mx-1"><i class="bi bi-trash text-danger"></i></a>
            </td>
        </tr>
        
         {% endif %}
<script>

function listAffaireByCompte(id = null, genre = 1) {
    //var anchorName = document.location.hash.substring(1);

    $.ajax({
            type: 'post',
            url: '/admin/affaires/'+id,
            data: {
                id: id,
                genre: genre
            },
            success: function (response) {
                if(genre == 1){
                    $("#affaires_client").empty();
                    $("#affaires_client").append(response.html);
                    $("#affaires_client").addClass('active');
                } else if(genre == 2) {
                    $("#affaires_fournisseur").empty();
                    $("#affaires_fournisseur").append(response.html);
                    $("#affaires_fournisseur").addClass('active');
                }

                $('.sidebar-nav a[href="#tab-dashboard"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-permission"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-privilege"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-application"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-utilisateur"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-categorie-permission"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-categorie"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-compte_1"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-compte_2"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-produit-categorie"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-produit-type"]').addClass('collapsed');
                $('.sidebar-nav a[href="#tab-produit-image"]').addClass('collapsed');
                
                $(".loadBody").css('display', 'none');

            },
            error: function () {
                // $(".loadBody").css('display', 'none');
                $(".chargementError").css('display', 'block');
            }

        });
}

    function deleteCompte(id = null, genre = 1) {
        let currentCompte = "clients";
        let titleCompte = "client";
        if (genre == 2) {
            currentCompte = "fournisseur";
            titleCompte = "fournisseur";
        }
        if (confirm('Voulez vous vraiment supprimer cet '+titleCompte+'?')) {
            $.ajax({
                url: '/admin/comptes/delete/'+id,
                type: 'POST',
                data: {category: id},
                success: function (response) {
                    let currentCompte = "clients";
                    if (genre == 2) {
                        currentCompte = "fournisseur";
                    }
                    var nextLink = $('#sidebar').find('li#'+currentCompte).find('a');
                    setTimeout(function () {
                        toastr.options = {
                            closeButton: true,
                            progressBar: true,
                            showMethod: 'slideDown',
                            timeOut: 1000
                        };
                        toastr.success('Avec succèss', 'Suppression effectuée');

                        //$(".loadBody").css('display', 'none');

                    }, 800);
                    if (nextLink.length > 0) {
                        nextLink.click();
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    // Gérer l'erreur (par exemple, afficher un message d'erreur)
                    alert('Erreur lors de la suppression de la compte.');
                }
            });
        }
    }

    function openModalUpdatecompte(id = null, genre = 1) {
        $.ajax({
                url: '/admin/comptes/'+id,
                type: 'POST',
                data: {id: id},
                success: function (response) {
                    if (response.html != "") {
                        let currentCompte = "modalUpdateClient";
                        if (genre == 2) {
                            currentCompte = "modalUpdateFournisseur";
                        }
                        $("#blocModalCompteEmpty").empty();
                        $("#blocModalCompteEmpty").append(response.html);

                        $('#'+currentCompte).modal('show');
                    }
                    
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    // Gérer l'erreur (par exemple, afficher un message d'erreur)
                    alert('Erreur lors de la mise à jour de la compte.');
                }
            });
    }

</script>